<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dark-Team | مانجا & كوميكس</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}
    body{background:#0a0a0a;color:#e0e0e0;min-height:100vh}
    .container{max-width:1200px;margin:0 auto;padding:0 15px}
    header{background:#111;padding:15px 0;border-bottom:2px solid #e50914;position:sticky;top:0;z-index:100}
    .header-content{display:flex;justify-content:space-between;align-items:center}
    .logo{font-size:24px;font-weight:bold;color:#e50914;cursor:pointer}
    .logo span{color:white}
    .code-btn{background:#e50914;color:white;border:none;padding:10px 20px;border-radius:5px;cursor:pointer;font-weight:bold}
    .sections{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin:40px 0}
    .section-card{background:#111;border-radius:10px;padding:20px;text-align:center;border:1px solid #333;cursor:pointer}
    .section-card h2{color:#e50914;margin:15px 0}
    .content-section{display:none;margin:40px 0}
    .content-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px;margin-top:20px}
    .content-item{background:#111;border-radius:10px;overflow:hidden;border:1px solid #333;transition:transform .3s;cursor:pointer}
    .content-item:hover{transform:translateY(-5px)}
    .content-cover{width:100%;height:250px;object-fit:cover}
    .content-info{padding:15px}
    .content-title{color:#e50914;font-weight:bold;margin-bottom:5px}
    .back-btn{background:#333;color:white;border:none;padding:10px 20px;border-radius:5px;cursor:pointer;margin-bottom:20px}
    .reader{display:none;position:fixed;inset:0;background:#000;z-index:1000}
    .reader-controls{position:fixed;top:20px;left:20px;right:20px;display:flex;justify-content:space-between;z-index:1001}
    .reader-nav{position:fixed;top:50%;transform:translateY(-50%);background:rgba(229,9,20,.8);color:white;border:none;padding:15px 25px;font-size:18px;cursor:pointer;z-index:1001}
    .prev-btn{left:20px}
    .next-btn{right:20px}
    .reader-image{max-width:100%;max-height:100vh;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);object-fit:contain}
    .page-counter{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.7);color:white;padding:10px 20px;border-radius:20px;z-index:1001}
    .dev-panel{display:none;background:#111;padding:20px;border-radius:10px;margin:20px 0;border:2px solid #e50914}
    .dev-controls{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin:20px 0}
    .dev-btn{background:#333;color:white;border:none;padding:12px;border-radius:5px;cursor:pointer}
    .dev-btn:hover{background:#e50914}
    .add-content{background:#1a1a1a;padding:20px;border-radius:10px;margin:20px 0;border:1px solid #333}
    .form-group{margin-bottom:15px}
    .form-group label{display:block;margin-bottom:5px;color:#e50914;font-weight:bold}
    .form-group input,.form-group textarea{width:100%;padding:10px;background:#2a2a2a;border:1px solid #444;border-radius:5px;color:white}
    .image-upload{border:2px dashed #444;padding:30px;text-align:center;border-radius:10px;cursor:pointer;margin:10px 0}
    .image-upload:hover{border-color:#e50914}
    .image-preview{display:flex;flex-wrap:wrap;gap:10px;margin:15px 0}
    .preview-item{width:100px;height:150px;border-radius:5px;overflow:hidden;position:relative;border:1px solid #444}
    .preview-item img{width:100%;height:100%;object-fit:cover}
    .remove-btn{position:absolute;top:5px;right:5px;background:rgba(229,9,20,.8);color:white;border:none;border-radius:50%;width:25px;height:25px;cursor:pointer}
    .submit-btn{background:#e50914;color:white;border:none;padding:15px 30px;border-radius:5px;cursor:pointer;font-weight:bold;width:100%;font-size:16px;margin-top:20px}
    footer{background:#111;padding:20px 0;text-align:center;margin-top:40px;border-top:1px solid #333}
  </style>
</head>
<body>
<header>
  <div class="container">
    <div class="header-content">
      <div class="logo" onclick="showMain()">DARK<span>-TEAM</span></div>
      <button class="code-btn" id="codeBtn">كود</button>
    </div>
  </div>
</header>

<div class="container">
  <div class="sections" id="mainSections">
    <div class="section-card" onclick="showContent('manga')">
      <h2>المانجا</h2>
      <p>مانجا يابانية مترجمة للعربية</p>
    </div>
    <div class="section-card" onclick="showContent('comic')">
      <h2>الكوميكس</h2>
      <p>قصص مصورة من حول العالم</p>
    </div>
  </div>

  <div class="content-section" id="mangaSection">
    <button class="back-btn" onclick="showMain()">← الرجوع</button>
    <h2 style="color:#e50914;text-align:center;">المكتبة - المانجا</h2>
    <div class="content-grid" id="mangaGrid"></div>
  </div>

  <div class="content-section" id="comicSection">
    <button class="back-btn" onclick="showMain()">← الرجوع</button>
    <h2 style="color:#e50914;text-align:center;">المكتبة - الكوميكس</h2>
    <div class="content-grid" id="comicGrid"></div>
  </div>

  <div class="reader" id="reader">
    <div class="reader-controls"><button class="back-btn" onclick="closeReader()">✕ إغلاق</button></div>
    <button class="reader-nav prev-btn" onclick="prevPage()">السابق</button>
    <img class="reader-image" id="readerImage" src="">
    <button class="reader-nav next-btn" onclick="nextPage()">التالي</button>
    <div class="page-counter" id="pageCounter">1 / 1</div>
  </div>

  <div class="dev-panel" id="devPanel">
    <h2 style="color:#e50914;text-align:center;">👑 واجهة المطور</h2>
    <div class="dev-controls">
      <button class="dev-btn" onclick="showAddForm('manga')">إضافة مانجا</button>
      <button class="dev-btn" onclick="showAddForm('comic')">إضافة كوميكس</button>
    </div>
    <div class="add-content" id="addMangaForm" style="display:none;">
      <h3 style="color:#e50914;text-align:center;">إضافة مانجا جديدة</h3>
      <div class="form-group"><label>اسم المانجا</label><input type="text" id="mangaName"></div>
      <div class="form-group"><label>وصف المانجا</label><textarea id="mangaDesc" rows="3"></textarea></div>
      <div class="form-group"><label>غلاف المانجا</label><input type="file" id="mangaCover" accept="image/*" multiple></div>
      <div class="form-group"><label>صفحات المانجا</label><input type="file" id="mangaPages" accept="image/*" multiple></div>
      <button class="submit-btn" onclick="addManga()">إضافة المانجا</button>
    </div>
    <div class="add-content" id="addComicForm" style="display:none;">
      <h3 style="color:#e50914;text-align:center;">إضافة كوميكس جديد</h3>
      <div class="form-group"><label>اسم الكوميكس</label><input type="text" id="comicName"></div>
      <div class="form-group"><label>وصف الكوميكس</label><textarea id="comicDesc" rows="3"></textarea></div>
      <div class="form-group"><label>غلاف الكوميكس</label><input type="file" id="comicCover" accept="image/*" multiple></div>
      <div class="form-group"><label>صفحات الكوميكس</label><input type="file" id="comicPages" accept="image/*" multiple></div>
      <button class="submit-btn" onclick="addComic()">إضافة الكوميكس</button>
    </div>
  </div>
</div>

<footer><div class="container"><div class="logo">DARK-TEAM</div></div></footer>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey:"AIzaSyDlrgxm_4lla3BPkvxuVa04Bbto0TZVdCc",
    authDomain:"dark-team-88c64.firebaseapp.com",
    projectId:"dark-team-88c64",
    storageBucket:"dark-team-88c64.firebasestorage.app",
    messagingSenderId:"524305256907",
    appId:"1:524305256907:web:f196942a54f5706bb8664e",
    measurementId:"G-C818EDNSV3"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  async function saveToFirebase(type, data){try{await addDoc(collection(db,type),data);}catch(e){console.error(e);}}
  async function loadFromFirebase(type){const snap=await getDocs(collection(db,type));const arr=[];snap.forEach(d=>arr.push(d.data()));return arr;}

  window.saveToFirebase=saveToFirebase;
  window.loadFromFirebase=loadFromFirebase;
</script>

<script>
  let mangaList=[],comicList=[],currentReader=null,currentPage=0;

  document.getElementById('codeBtn').onclick=async()=>{const code=prompt("أدخل الكود:");if(code==="vx"){document.getElementById('devPanel').style.display='block';showMain();mangaList=await loadFromFirebase("manga");comicList=await loadFromFirebase("comic");displayManga();displayComics();}else alert("الكود خاطئ!");};
  function showMain(){["mainSections","mangaSection","comicSection","reader"].forEach(id=>document.getElementById(id).style.display="none");document.getElementById('mainSections').style.display="grid";}
  function showContent(t){["mainSections","devPanel"].forEach(id=>document.getElementById(id).style.display="none");if(t==="manga"){document.getElementById('mangaSection').style.display="block";displayManga();}else{document.getElementById('comicSection').style.display="block";displayComics();}}
  function displayManga(){const g=document.getElementById('mangaGrid');g.innerHTML='';mangaList.forEach(m=>{const it=document.createElement('div');it.className='content-item';it.innerHTML=`<img src="${m.cover}" class="content-cover"><div class="content-info"><div class="content-title">${m.name}</div><div style="color:#888">${m.desc}</div></div>`;it.onclick=()=>openReader(m.pages,m.name);g.appendChild(it);});}
  function displayComics(){const g=document.getElementById('comicGrid');g.innerHTML='';comicList.forEach(m=>{const it=document.createElement('div');it.className='content-item';it.innerHTML=`<img src="${m.cover}" class="content-cover"><div class="content-info"><div class="content-title">${m.name}</div><div style="color:#888">${m.desc}</div></div>`;it.onclick=()=>openReader(m.pages,m.name);g.appendChild(it);});}
  function openReader(p,t){if(!p.length){alert("لا توجد صفحات!");return;}currentReader=p;currentPage=0;updateReader();document.getElementById('reader').style.display='block';}
  function closeReader(){document.getElementById('reader').style.display='none';}
  function prevPage(){if(currentPage>0){currentPage--;updateReader();}}
  function nextPage(){if(currentReader&&currentPage<currentReader.length-1){currentPage++;updateReader();}}
  function updateReader(){document.getElementById('readerImage').src=currentReader[currentPage];document.getElementById('pageCounter').textContent=`${currentPage+1}/${currentReader.length}`;}
  function showAddForm(t){["addMangaForm","addComicForm"].forEach(id=>document.getElementById(id).style.display="none");document.getElementById(t==="manga"?"addMangaForm":"addComicForm").style.display="block";}
  function addManga(){const n=document.getElementById('mangaName').value,d=document.getElementById('mangaDesc').value,c=document.getElementById('mangaCover').files[0],p=Array.from(document.getElementById('mangaPages').files);if(!n||!d||!c||!p.length)return alert("الرجاء إدخال جميع البيانات");const r=new FileReader();r.onload=()=>{const cover=r.result,pages=[];let done=0;p.forEach(f=>{const fr=new FileReader();fr.onload=()=>{pages.push(fr.result);if(++done===p.length){const m={name:n,desc:d,cover,pages};mangaList.push(m);saveToFirebase("manga",m);displayManga();alert("تمت إضافة المانجا!");}};fr.readAsDataURL(f);});};r.readAsDataURL(c);}
  function addComic(){const n=document.getElementById('comicName').value,d=document.getElementById('comicDesc').value,c=document.getElementById('comicCover').files[0],p=Array.from(document.getElementById('comicPages').files);if(!n||!d||!c||!p.length)return alert("الرجاء إدخال جميع البيانات");const r=new FileReader();r.onload=()=>{const cover=r.result,pages=[];let done=0;p.forEach(f=>{const fr=new FileReader();fr.onload=()=>{pages.push(fr.result);if(++done===p.length){const m={name:n,desc:d,cover,pages};comicList.push(m);saveToFirebase("comic",m);displayComics();alert("تمت إضافة الكوميكس!");}};fr.readAsDataURL(f);});};r.readAsDataURL(c);}
  async function initLoad(){mangaList=await loadFromFirebase("manga");comicList=await loadFromFirebase("comic");}
  initLoad();
</script>
</body>
</html>